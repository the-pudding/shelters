{"version":3,"sources":["../../node_modules/lodash.debounce/index.js","utils/is-mobile.js","load-data.js","graphic.js","pudding-chart/exports-template.js","exported-dogs.js","footer.js","utils/us-state-data.js","../../node_modules/topojson/node_modules/topojson-client/src/identity.js","../../node_modules/topojson/node_modules/topojson-client/src/transform.js","../../node_modules/topojson/node_modules/topojson-client/src/bbox.js","../../node_modules/topojson/node_modules/topojson-client/src/reverse.js","../../node_modules/topojson/node_modules/topojson-client/src/feature.js","../../node_modules/topojson/node_modules/topojson-client/src/stitch.js","../../node_modules/topojson/node_modules/topojson-client/src/mesh.js","../../node_modules/topojson/node_modules/topojson-client/src/merge.js","../../node_modules/topojson/node_modules/topojson-client/src/bisect.js","../../node_modules/topojson/node_modules/topojson-client/src/neighbors.js","../../node_modules/topojson/node_modules/topojson-client/src/untransform.js","../../node_modules/topojson/node_modules/topojson-client/src/quantize.js","../../node_modules/topojson/node_modules/topojson-client/index.js","../../node_modules/topojson/node_modules/topojson-server/src/bounds.js","../../node_modules/topojson/node_modules/topojson-server/src/hash/hashset.js","../../node_modules/topojson/node_modules/topojson-server/src/hash/hashmap.js","../../node_modules/topojson/node_modules/topojson-server/src/hash/point-equal.js","../../node_modules/topojson/node_modules/topojson-server/src/hash/point-hash.js","../../node_modules/topojson/node_modules/topojson-server/src/join.js","../../node_modules/topojson/node_modules/topojson-server/src/cut.js","../../node_modules/topojson/node_modules/topojson-server/src/dedup.js","../../node_modules/topojson/node_modules/topojson-server/src/delta.js","../../node_modules/topojson/node_modules/topojson-server/src/extract.js","../../node_modules/topojson/node_modules/topojson-server/src/geometry.js","../../node_modules/topojson/node_modules/topojson-server/src/prequantize.js","../../node_modules/topojson/node_modules/topojson-server/src/topology.js","../../node_modules/topojson/node_modules/topojson-server/index.js","../../node_modules/topojson/node_modules/topojson-simplify/src/prune.js","../../node_modules/topojson/node_modules/topojson-simplify/src/filter.js","../../node_modules/topojson/node_modules/topojson-simplify/src/filterAttached.js","../../node_modules/topojson/node_modules/topojson-simplify/src/planar.js","../../node_modules/topojson/node_modules/topojson-simplify/src/filterWeight.js","../../node_modules/topojson/node_modules/topojson-simplify/src/filterAttachedWeight.js","../../node_modules/topojson/node_modules/topojson-simplify/src/heap.js","../../node_modules/topojson/node_modules/topojson-simplify/src/presimplify.js","../../node_modules/topojson/node_modules/topojson-simplify/src/quantile.js","../../node_modules/topojson/node_modules/topojson-simplify/src/simplify.js","../../node_modules/topojson/node_modules/topojson-simplify/src/spherical.js","../../node_modules/topojson/node_modules/topojson-simplify/index.js","../../node_modules/topojson/index.js","movement.js","main.js"],"names":["isMobile","android","navigator","userAgent","match","blackberry","ios","opera","windows","any","loadJSON","file","Promise","resolve","reject","d3","json","then","result","catch","loadCSV","csv","loadExamples","loadExported","loadMap","loads","all","readerState","$section","selectAll","$state","$name","$pOut","$pIn","$img","$inCount","$outCount","$total","$pupHerHis","$pupSheHe","exampleDogs","exportedDogs","readerDog","updateLocation","loc","filterDogs","filter","d","current","text","name","imported","classed","count_imported","count_exported","total","pupPronoun","sex","attr","image","resize","init","load","console","log","error","selection","prototype","exportsByState","options","createChart","el","$sel","select","data","datum","width","height","marginTop","marginBottom","marginLeft","marginRight","scaleX","scaleY","$svg","$axis","$vis","$containerMini","Chart","render","join","enter","state","append","$title","key","$container","values","style","exit","remove","val","arguments","length","charts","nodes","map","pop","$moreButton","$transparency","setupExpand","on","truncated","y","window","scrollTo","scrollY","filteredExports","final_state","nestedExports","nest","original_state","entries","sort","a","b","descending","fallbackData","url","hed","storyData","loadJS","src","cb","ref","document","getElementsByTagName","script","createElement","async","parentNode","insertBefore","onload","loadStories","request","XMLHttpRequest","v","Date","now","open","status","JSON","parse","responseText","onerror","send","createLink","recircHTML","location","href","html","includes","slice","setupSocialJS","s","id","js","fjs","getElementById","abbr","x","transform","identity","x0","y0","kx","scale","ky","dx","translate","dy","input","i","j","n","output","Array","topology","t","Infinity","x1","y1","bboxPoint","p","bboxGeometry","o","type","geometries","forEach","coordinates","arcs","arc","objects","array","features","feature","bbox","properties","geometry","object","transformPoint","points","k","push","point","line","ring","polygon","stitchedArcs","fragmentByStart","fragmentByEnd","fragments","emptyIndex","e","ends","start","end","f","g","fg","concat","unshift","gf","p0","p1","dp","flush","meshArcs","apply","extractArcs","geomsByArc","geom","extract0","extract1","extract2","extract3","geoms","planarRingArea","area","Math","abs","mergeArcs","polygonsByArc","polygons","groups","extract","_","group","neighbors","ki","lo","hi","mid","indexesByArc","geometryType","LineString","MultiLineString","Polygon","MultiPolygon","indexes","m","ij","ik","splice","round","Error","floor","box","inputs","outputs","quantizePoint","quantizeGeometry","quantizeArc","boundGeometry","boundGeometryType","hasOwnProperty","GeometryCollection","Point","boundPoint","MultiPoint","boundLine","boundMultiLine","undefined","size","hash","equal","empty","store","max","ceil","LN2","mask","add","value","index","collisions","has","keyType","keyEmpty","valueType","keystore","valstore","set","matchKey","maybeSet","get","missingValue","keys","pointA","pointB","buffer","ArrayBuffer","floats","Float64Array","uints","Uint32Array","lines","rings","visitedByIndex","Int32Array","leftByIndex","rightByIndex","junctionByIndex","Int8Array","junctionCount","previousIndex","currentIndex","nextIndex","lineStart","lineEnd","sequence","ringStart","ringEnd","leftIndex","rightIndex","indexByPoint","hashIndex","equalIndex","junctionByPoint","hashPoint","equalPoint","junctions","next","lineMid","ringMid","ringFixed","rotateArray","offset","reverse","arcCount","arcsByEnd","dedupLine","dedupRing","startPoint","endPoint","startArcs","startArc","endArcs","endArc","equalLine","reverseEqualLine","equalRing","reverseEqualRing","findMinimumOffset","arcA","arcB","ia","ib","ja","jb","ka","kb","minimum","minimumPoint","extractGeometry","extractGeometryType","extractLine","extractRing","extractMultiRing","geomifyObject","geomifyFeatureCollection","geomifyFeature","geomifyGeometry","quantizePoints","pi","px","py","quantizeLine","quantizeRing","quantizePolygon","quantizeGeometryType","quantization","indexByArc","hashArc","equalArc","indexGeometry","indexGeometryType","indexArcs","indexMultiArcs","oldObjects","newObjects","oldArcs","oldArcsLength","oldIndex","newIndexByOldIndex","newArcsLength","newArcs","newIndex","scanGeometry","scanArcs","scanMultiArcs","scanArc","reindexGeometry","reindexArcs","reindexMultiArcs","reindexArc","filterTrue","filterGeometry","filterRings","filterIdentity","filterNotNull","filterExteriorRing","filterInteriorRing","ownerByArc","ownerIndex","testGeometry","testArcs","owner","planarTriangleArea","triangle","c","minWeight","weight","Number","MIN_VALUE","interior","w","compare","heap","up","removed","down","parent","r","l","child","copy","triangles","maxWeight","previous","update","isFinite","quantile","h","PI","tau","quarterPi","radians","atan2","cos","sin","halfArea","closed","sum","lambda0","lambda1","phi1","cosPhi0","cosPhi1","sinPhi0","sinPhi1","dLambda","sdLambda","adLambda","u","sphericalRingArea","sphericalTriangleArea","centers","movement","us","$figure","hypotenuse","sqrt","projection","geoAlbersUsa","radius","scaleSqrt","path","geoPath","setupDOM","$basemap","topojson","land","mesh","states","$drawnPaths","setup","findCoordinates","node","offsetWidth","offsetHeight","domain","range","pointRadius","setupLocations","longitude","latitude","locationByName","test","dog","source","from","target","to","$body","previousWidth","$dropdown","graphic","setupStateDropdown","justStates","property","exported","setupStickyHeader","$header","$menu","$toggle","visible","addEventListener","footer"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACzXA;AAEA,IAAMA,QAAQ,GAAG;AAChBC,EAAAA,OAAO,EAAE;AAAA,WAAMC,SAAS,CAACC,SAAV,CAAoBC,KAApB,CAA0B,UAA1B,CAAN;AAAA,GADO;AAGhBC,EAAAA,UAAU,EAAE;AAAA,WAAMH,SAAS,CAACC,SAAV,CAAoBC,KAApB,CAA0B,aAA1B,CAAN;AAAA,GAHI;AAKhBE,EAAAA,GAAG,EAAE;AAAA,WAAMJ,SAAS,CAACC,SAAV,CAAoBC,KAApB,CAA0B,mBAA1B,CAAN;AAAA,GALW;AAOhBG,EAAAA,KAAK,EAAE;AAAA,WAAML,SAAS,CAACC,SAAV,CAAoBC,KAApB,CAA0B,aAA1B,CAAN;AAAA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","file":"main.js","sourceRoot":"../src/js","sourcesContent":["/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the `TypeError` message for \"Functions\" methods. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        result = wait - timeSinceLastCall;\n\n    return maxing ? nativeMin(result, maxWait - timeSinceLastInvoke) : result;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && objectToString.call(value) == symbolTag);\n}\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = debounce;\n","// device sniffing for mobile\n\nconst isMobile = {\n\tandroid: () => navigator.userAgent.match(/Android/i),\n\n\tblackberry: () => navigator.userAgent.match(/BlackBerry/i),\n\n\tios: () => navigator.userAgent.match(/iPhone|iPad|iPod/i),\n\n\topera: () => navigator.userAgent.match(/Opera Mini/i),\n\n\twindows: () => navigator.userAgent.match(/IEMobile/i),\n\n\tany: () => (\n\t\tisMobile.android() ||\n\t\tisMobile.blackberry() ||\n\t\tisMobile.ios() ||\n\t\tisMobile.opera() ||\n\t\tisMobile.windows()\n\t),\n}\n\nexport default isMobile\n","/* global d3 */\n/* usage\n\timport loadData from './load-data'\n\tloadData().then(result => {\n\n\t}).catch(console.error)\n*/\n\nfunction loadJSON(file) {\n  return new Promise((resolve, reject) => {\n    d3.json(`assets/data/${file}`)\n      .then(result => {\n        // clean here\n        resolve(result);\n      })\n      .catch(reject);\n  });\n}\n\n\nfunction loadCSV(file) {\n  return new Promise((resolve, reject) => {\n    d3.csv(`assets/data/${file}`)\n      .then(result => {\n\n        resolve(result);\n      })\n      .catch(reject);\n  });\n}\n\nfunction loadExamples(){\n  loadJSON('exampleDogs.json')\n}\n\nfunction loadExported(){\n  loadCSV('exportedDogs.csv')\n}\n\nfunction loadMap(){\n  const loads = [loadCSV('loc_centers.csv'), loadCSV('movement_paths.csv'), loadJSON('topo.json')];\n  return Promise.all(loads);\n}\n\nexport default {loadCSV, loadJSON, loadMap}\n\n// export default function loadData() {\n//   const loads = [loadJSON('exampleDogs.json'), loadCSV('exportedDogs.csv')];\n//   return Promise.all(loads);\n// }\n","/* global d3 */\nimport load from './load-data'\n\n// reader parameters\nlet readerState = null\n\n// updating text selections\nconst $section = d3.selectAll('.intro')\nconst $state = d3.selectAll('.userState')\nconst $name = $section.selectAll('.exampleDog')\nconst $pOut = $section.selectAll('.intro-dog_out')\nconst $pIn = $section.selectAll('.intro-dog_in')\nconst $img = $section.selectAll('.intro-dog_image')\nconst $inCount = $section.selectAll('.inTotal')\nconst $outCount = $section.selectAll('.outTotal')\nconst $total = $section.selectAll('.stateTotal')\nconst $pupHerHis = $section.selectAll('.herhis')\nconst $pupSheHe = $section.selectAll('.shehe')\n\n\n\n// constants\nlet exampleDogs = null\nlet exportedDogs = null\nlet readerDog = null\n\nfunction updateLocation(loc){\n  readerState = loc\n  filterDogs()\n}\n\n\nfunction filterDogs(){\n  readerDog = exampleDogs.filter(d => d.current === readerState)\n\n  // update state\n  $state.text(readerState)\n  $name.text(readerDog[0].name)\n\n  // show appropriate text\n  if (readerDog[0].imported === \"TRUE\"){\n    $pOut.classed('is-visible', true)\n    $pIn.classed('is-visible', false)\n  } else {\n    $pOut.classed('is-visible', false)\n    $pIn.classed('is-visible', true)\n  }\n\n  // update counts\n  $inCount.text(readerDog[0].count_imported)\n  $outCount.text(readerDog[0].count_exported)\n  $total.text(readerDog[0].total)\n\n  // update pronouns\n  const pupPronoun = readerDog[0].sex\n  $pupHerHis.text(pupPronoun === 'm' ? 'his' : 'her')\n  $pupSheHe.text(pupPronoun === 'm' ? 'he' : 'she')\n\n  // add dog image\n  $img.attr('src', readerDog[0].image)\n}\n\n\n// code for determining user's location and subsequent data\nfunction resize() {}\n\nfunction init(loc) {\n  load.loadJSON('exampleDogs.json')\n    .then(result => {\n      console.log({loc})\n      readerState = loc\n      exampleDogs = result\n      filterDogs()\n    })\n    .catch(console.error)\n}\n\nexport default { init, resize, updateLocation };\n","/*\n USAGE (example: line chart)\n 1. c+p this template to a new file (line.js)\n 2. change puddingChartName to puddingChartLine\n 3. in graphic file: import './pudding-chart/line'\n 4a. const charts = d3.selectAll('.thing').data(data).puddingChartLine();\n 4b. const chart = d3.select('.thing').datum(datum).puddingChartLine();\n*/\n\nd3.selection.prototype.exportsByState = function init(options) {\n\tfunction createChart(el) {\n\t\tconst $sel = d3.select(el);\n\t\tlet data = $sel.datum();\n\n\t\t// dimension stuff\n\t\tlet width = 0;\n\t\tlet height = 0;\n\t\tconst marginTop = 0;\n\t\tconst marginBottom = 0;\n\t\tconst marginLeft = 0;\n\t\tconst marginRight = 0;\n\n\t\t// scales\n\t\tconst scaleX = null;\n\t\tconst scaleY = null;\n\n\t\t// dom elements\n\t\tlet $svg = null;\n\t\tlet $axis = null;\n\t\tlet $vis = null;\n\t\tlet $containerMini = null\n\n\t\t// helper functions\n\n\t\tconst Chart = {\n\t\t\t// called once at start\n\t\t\tinit() {\n\n\n\t\t\t\tChart.resize();\n\t\t\t\tChart.render();\n\t\t\t},\n\t\t\t// on resize, update new dimensions\n\t\t\tresize() {\n\t\t\t\t// defaults to grabbing dimensions from container element\n\t\t\t\t// width = $sel.node().offsetWidth - marginLeft - marginRight;\n\t\t\t\t// height = $sel.node().offsetHeight - marginTop - marginBottom;\n\t\t\t\t// $svg\n\t\t\t\t// \t.attr('width', width + marginLeft + marginRight)\n\t\t\t\t// \t.attr('height', height + marginTop + marginBottom);\n\t\t\t\treturn Chart;\n\t\t\t},\n\t\t\t// update scales and render chart\n\t\t\trender() {\n\t\t\t\tconst $state = $sel.selectAll('.state')\n\t\t\t\t\t.data(data)\n\t\t\t\t\t.join(\n\t\t\t\t\t\tenter => {\n\t\t\t\t\t\t\tconst state = enter\n\t\t\t\t\t\t\t\t.append('div')\n\t\t\t\t\t\t\t\t.attr('class', 'state')\n\n\t\t\t\t\t\t\tconst $title = state.append('p')\n\t\t\t\t\t\t\t\t.attr('class', 'state-name')\n\t\t\t\t\t\t\t\t.text(d => d.key)\n\n\t\t\t\t\t\t\tconst $container = state.append('div')\n\t\t\t\t\t\t\t\t.attr('class', 'container-mini')\n\n\t\t\t\t\t\t\t$container.selectAll('.dog')\n\t\t\t\t\t\t\t\t.data(d => d.values)\n\t\t\t\t\t\t\t\t.enter()\n\t\t\t\t\t\t\t\t.append('div')\n\t\t\t\t\t\t\t\t.attr('class', 'dog')\n\t\t\t\t\t\t\t\t.style('background-image', d => `url(assets/images/profiles/${d.file}.png)`)\n\t\t\t\t\t\t},\n\t\t\t\t\t\texit => {\n\t\t\t\t\t\t\texit.remove()\n\t\t\t\t\t\t}\n\t\t\t\t\t)\n\n\n\t\t\t\t//\n\t\t\t\t// const sorted = data.values\n\t\t\t\t// \t.sort((a, b) => d3.ascending(a.size, b.size))\n\t\t\t\t// \t.sort((a,b) => {\n\t\t\t\t// \t\treturn d3.ascending(a.file, b.file)\n\t\t\t\t// \t})\n\n\t\t\t\t// $containerMini.selectAll('.dog')\n\t\t\t\t// \t.data(sorted)\n\t\t\t\t// \t.join(\n\t\t\t\t// \t\tenter => {\n\t\t\t\t// \t\t\tenter.append('div')\n\t\t\t\t// \t\t\t\t.attr('class', 'dog')\n\t\t\t\t// \t\t\t\t.style('background-image', d => `url(assets/images/profiles/${d.file}.png)`)\n\t\t\t\t// \t\t},\n\t\t\t\t// \t\texit => {\n\t\t\t\t// \t\t\texit.remove()\n\t\t\t\t// \t\t}\n\t\t\t\t// \t)\n\n\n\n\t\t\t\treturn Chart;\n\t\t\t},\n\t\t\t// get / set data\n\t\t\tdata(val) {\n\t\t\t\tif (!arguments.length) return data;\n\t\t\t\tdata = val;\n\t\t\t\t$sel.datum(data);\n\t\t\t\tChart.render();\n\t\t\t\treturn Chart;\n\t\t\t}\n\t\t};\n\t\tChart.init();\n\n\t\treturn Chart;\n\t}\n\n\t// create charts\n\tconst charts = this.nodes().map(createChart);\n\treturn charts.length > 1 ? charts : charts.pop();\n};\n","/* global d3 */\nimport load from './load-data'\nimport './pudding-chart/exports-template'\n\n// reader parameters\nlet readerState = null\n\n// updating text selections\nconst $section = d3.selectAll('.exported')\nconst $container = $section.selectAll('.figure-container')\nconst $moreButton = $section.select('.show-more')\nconst $transparency = $section.select('.transparency')\n\n// constants\nlet exportedDogs = null\nlet charts = null\n\n\nfunction setupExpand(){\n  $moreButton.on('click', () => {\n\t\tconst truncated = !$container.classed('is-expanded');\n\t\tconst text = truncated ? 'Show Fewer' : 'Show All';\n\t\t$moreButton.text(text);\n\t\t$container.classed('is-expanded', truncated);\n\n\t\tif (!truncated) {\n\t\t\tconst y = +$moreButton.attr('data-y');\n\t\t\twindow.scrollTo(0, y);\n\t\t}\n\n\t\t$moreButton.attr('data-y', window.scrollY);\n\t\t$transparency.classed('is-visible', !truncated);\n\t});\n}\n\nfunction updateLocation(loc){\n  readerState = loc\n\n  const filteredExports = exportedDogs.filter(d => d.final_state === readerState)\n\n  const nestedExports = d3.nest()\n    .key(d => d.original_state)\n    .entries(filteredExports)\n    .sort((a, b) => d3.descending(a.values.length, b.values.length))\n\n  charts.data(nestedExports)\n  //filterDogs()\n}\n\nfunction filterDogs(){\n  // filter exported dogs\n  const filteredExports = exportedDogs.filter(d => d.final_state === readerState)\n\n  const nestedExports = d3.nest()\n    .key(d => d.original_state)\n    .entries(filteredExports)\n    .sort((a, b) => d3.descending(a.values.length, b.values.length))\n\n  charts = $section\n    .select('.figure-container')\n    .datum(nestedExports)\n    .exportsByState()\n}\n\n\n// code for determining user's location and subsequent data\nfunction resize() {}\n\nfunction init(loc) {\n  load.loadCSV('exportedDogs.csv')\n    .then(result => {\n      readerState = loc\n      exportedDogs = result\n      filterDogs()\n\n      // setup interaction with show more button\n      setupExpand()\n    })\n    .catch(console.error)\n}\n\nexport default { init, resize, updateLocation };\n","const fallbackData = [\n  {\n    image: '2018_02_stand-up',\n    url: '2018/02/stand-up',\n    hed: 'The Structure of Stand-Up Comedy',\n  },\n  {\n    image: '2018_04_birthday-paradox',\n    url: '2018/04/birthday-paradox',\n    hed: 'The Birthday Paradox Experiment',\n  },\n  {\n    image: '2018_11_boy-bands',\n    url: '2018/11/boy-bands',\n    hed: 'Internet Boy Band Database',\n  },\n  {\n    image: '2018_08_pockets',\n    url: '2018/08/pockets',\n    hed: 'Womens Pockets are Inferior',\n  },\n];\n\nlet storyData = null;\n\nfunction loadJS(src, cb) {\n  const ref = document.getElementsByTagName('script')[0];\n  const script = document.createElement('script');\n  script.src = src;\n  script.async = true;\n  ref.parentNode.insertBefore(script, ref);\n\n  if (cb && typeof cb === 'function') {\n    script.onload = cb;\n  }\n\n  return script;\n}\n\nfunction loadStories(cb) {\n  const request = new XMLHttpRequest();\n  const v = Date.now();\n  const url = `https://pudding.cool/assets/data/stories.json?v=${v}`;\n  request.open('GET', url, true);\n\n  request.onload = () => {\n    if (request.status >= 200 && request.status < 400) {\n      const data = JSON.parse(request.responseText);\n      cb(data);\n    } else cb(fallbackData);\n  };\n\n  request.onerror = () => cb(fallbackData);\n\n  request.send();\n}\n\nfunction createLink(d) {\n  return `\n\t<a class='footer-recirc__article' href='https://pudding.cool/${\n    d.url\n  }' target='_blank'>\n\t\t<img class='article__img' src='https://pudding.cool/common/assets/thumbnails/640/${\n      d.image\n    }.jpg' alt='${d.hed}'>\n\t\t<p class='article__headline'>${d.hed}</p>\n\t</a>\n\t`;\n}\n\nfunction recircHTML() {\n  const url = window.location.href;\n  const html = storyData\n    .filter(d => !url.includes(d.url))\n    .slice(0, 4)\n    .map(createLink)\n    .join('');\n\n  d3.select('.pudding-footer .footer-recirc__articles').html(html);\n}\n\nfunction setupSocialJS() {\n  // facebook\n  (function(d, s, id) {\n    let js;\n\n    const fjs = d.getElementsByTagName(s)[0];\n    if (d.getElementById(id)) return;\n    js = d.createElement(s);\n    js.id = id;\n    js.src = '//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.7';\n    fjs.parentNode.insertBefore(js, fjs);\n  })(document, 'script', 'facebook-jssdk');\n\n  loadJS('https://platform.twitter.com/widgets.js');\n}\n\nfunction init() {\n  loadStories(data => {\n    storyData = data;\n\n    recircHTML();\n    setupSocialJS();\n  });\n}\n\nexport default { init };\n","export default [\n\t{ state: 'Alabama', abbr: 'AL' },\n\t{ state: 'Alaska', abbr: 'AK' },\n\t{ state: 'Arizona', abbr: 'AZ' },\n\t{ state: 'Arkansas', abbr: 'AR' },\n\t{ state: 'California', abbr: 'CA' },\n\t{ state: 'Colorado', abbr: 'CO' },\n\t{ state: 'Connecticut', abbr: 'CT' },\n\t{ state: 'Delaware', abbr: 'DE' },\n\t{ state: 'District of Columbia', abbr: 'DC' },\n\t{ state: 'Florida', abbr: 'FL' },\n\t{ state: 'Georgia', abbr: 'GA' },\n\t{ state: 'Hawaii', abbr: 'HI' },\n\t{ state: 'Idaho', abbr: 'ID' },\n\t{ state: 'Illinois', abbr: 'IL' },\n\t{ state: 'Indiana', abbr: 'IN' },\n\t{ state: 'Iowa', abbr: 'IA' },\n\t{ state: 'Kansas', abbr: 'KS' },\n\t{ state: 'Kentucky', abbr: 'KY' },\n\t{ state: 'Louisiana', abbr: 'LA' },\n\t{ state: 'Maine', abbr: 'ME' },\n\t{ state: 'Montana', abbr: 'MT' },\n\t{ state: 'Nebraska', abbr: 'NE' },\n\t{ state: 'Nevada', abbr: 'NV' },\n\t{ state: 'New Hampshire', abbr: 'NH' },\n\t{ state: 'New Jersey', abbr: 'NJ' },\n\t{ state: 'New Mexico', abbr: 'NM' },\n\t{ state: 'New York', abbr: 'NY' },\n\t{ state: 'North Carolina', abbr: 'NC' },\n\t{ state: 'North Dakota', abbr: 'ND' },\n\t{ state: 'Ohio', abbr: 'OH' },\n\t{ state: 'Oklahoma', abbr: 'OK' },\n\t{ state: 'Oregon', abbr: 'OR' },\n\t{ state: 'Maryland', abbr: 'MD' },\n\t{ state: 'Massachusetts', abbr: 'MA' },\n\t{ state: 'Michigan', abbr: 'MI' },\n\t{ state: 'Minnesota', abbr: 'MN' },\n\t{ state: 'Mississippi', abbr: 'MS' },\n\t{ state: 'Missouri', abbr: 'MO' },\n\t{ state: 'Pennsylvania', abbr: 'PA' },\n\t{ state: 'Rhode Island', abbr: 'RI' },\n\t{ state: 'South Carolina', abbr: 'SC' },\n\t{ state: 'South Dakota', abbr: 'SD' },\n\t{ state: 'Tennessee', abbr: 'TN' },\n\t{ state: 'Texas', abbr: 'TX' },\n\t{ state: 'Utah', abbr: 'UT' },\n\t{ state: 'Vermont', abbr: 'VT' },\n\t{ state: 'Virginia', abbr: 'VA' },\n\t{ state: 'Washington', abbr: 'WA' },\n\t{ state: 'West Virginia', abbr: 'WV' },\n\t{ state: 'Wisconsin', abbr: 'WI' },\n\t{ state: 'Wyoming', abbr: 'WY' },\n\t{ state: 'Washington DC', abbr: 'DC' }\n];\n","export default function(x) {\n  return x;\n}\n","import identity from \"./identity\";\n\nexport default function(transform) {\n  if (transform == null) return identity;\n  var x0,\n      y0,\n      kx = transform.scale[0],\n      ky = transform.scale[1],\n      dx = transform.translate[0],\n      dy = transform.translate[1];\n  return function(input, i) {\n    if (!i) x0 = y0 = 0;\n    var j = 2, n = input.length, output = new Array(n);\n    output[0] = (x0 += input[0]) * kx + dx;\n    output[1] = (y0 += input[1]) * ky + dy;\n    while (j < n) output[j] = input[j], ++j;\n    return output;\n  };\n}\n","import transform from \"./transform\";\n\nexport default function(topology) {\n  var t = transform(topology.transform), key,\n      x0 = Infinity, y0 = x0, x1 = -x0, y1 = -x0;\n\n  function bboxPoint(p) {\n    p = t(p);\n    if (p[0] < x0) x0 = p[0];\n    if (p[0] > x1) x1 = p[0];\n    if (p[1] < y0) y0 = p[1];\n    if (p[1] > y1) y1 = p[1];\n  }\n\n  function bboxGeometry(o) {\n    switch (o.type) {\n      case \"GeometryCollection\": o.geometries.forEach(bboxGeometry); break;\n      case \"Point\": bboxPoint(o.coordinates); break;\n      case \"MultiPoint\": o.coordinates.forEach(bboxPoint); break;\n    }\n  }\n\n  topology.arcs.forEach(function(arc) {\n    var i = -1, n = arc.length, p;\n    while (++i < n) {\n      p = t(arc[i], i);\n      if (p[0] < x0) x0 = p[0];\n      if (p[0] > x1) x1 = p[0];\n      if (p[1] < y0) y0 = p[1];\n      if (p[1] > y1) y1 = p[1];\n    }\n  });\n\n  for (key in topology.objects) {\n    bboxGeometry(topology.objects[key]);\n  }\n\n  return [x0, y0, x1, y1];\n}\n","export default function(array, n) {\n  var t, j = array.length, i = j - n;\n  while (i < --j) t = array[i], array[i++] = array[j], array[j] = t;\n}\n","import reverse from \"./reverse\";\nimport transform from \"./transform\";\n\nexport default function(topology, o) {\n  return o.type === \"GeometryCollection\"\n      ? {type: \"FeatureCollection\", features: o.geometries.map(function(o) { return feature(topology, o); })}\n      : feature(topology, o);\n}\n\nexport function feature(topology, o) {\n  var id = o.id,\n      bbox = o.bbox,\n      properties = o.properties == null ? {} : o.properties,\n      geometry = object(topology, o);\n  return id == null && bbox == null ? {type: \"Feature\", properties: properties, geometry: geometry}\n      : bbox == null ? {type: \"Feature\", id: id, properties: properties, geometry: geometry}\n      : {type: \"Feature\", id: id, bbox: bbox, properties: properties, geometry: geometry};\n}\n\nexport function object(topology, o) {\n  var transformPoint = transform(topology.transform),\n      arcs = topology.arcs;\n\n  function arc(i, points) {\n    if (points.length) points.pop();\n    for (var a = arcs[i < 0 ? ~i : i], k = 0, n = a.length; k < n; ++k) {\n      points.push(transformPoint(a[k], k));\n    }\n    if (i < 0) reverse(points, n);\n  }\n\n  function point(p) {\n    return transformPoint(p);\n  }\n\n  function line(arcs) {\n    var points = [];\n    for (var i = 0, n = arcs.length; i < n; ++i) arc(arcs[i], points);\n    if (points.length < 2) points.push(points[0]); // This should never happen per the specification.\n    return points;\n  }\n\n  function ring(arcs) {\n    var points = line(arcs);\n    while (points.length < 4) points.push(points[0]); // This may happen if an arc has only two points.\n    return points;\n  }\n\n  function polygon(arcs) {\n    return arcs.map(ring);\n  }\n\n  function geometry(o) {\n    var type = o.type, coordinates;\n    switch (type) {\n      case \"GeometryCollection\": return {type: type, geometries: o.geometries.map(geometry)};\n      case \"Point\": coordinates = point(o.coordinates); break;\n      case \"MultiPoint\": coordinates = o.coordinates.map(point); break;\n      case \"LineString\": coordinates = line(o.arcs); break;\n      case \"MultiLineString\": coordinates = o.arcs.map(line); break;\n      case \"Polygon\": coordinates = polygon(o.arcs); break;\n      case \"MultiPolygon\": coordinates = o.arcs.map(polygon); break;\n      default: return null;\n    }\n    return {type: type, coordinates: coordinates};\n  }\n\n  return geometry(o);\n}\n","export default function(topology, arcs) {\n  var stitchedArcs = {},\n      fragmentByStart = {},\n      fragmentByEnd = {},\n      fragments = [],\n      emptyIndex = -1;\n\n  // Stitch empty arcs first, since they may be subsumed by other arcs.\n  arcs.forEach(function(i, j) {\n    var arc = topology.arcs[i < 0 ? ~i : i], t;\n    if (arc.length < 3 && !arc[1][0] && !arc[1][1]) {\n      t = arcs[++emptyIndex], arcs[emptyIndex] = i, arcs[j] = t;\n    }\n  });\n\n  arcs.forEach(function(i) {\n    var e = ends(i),\n        start = e[0],\n        end = e[1],\n        f, g;\n\n    if (f = fragmentByEnd[start]) {\n      delete fragmentByEnd[f.end];\n      f.push(i);\n      f.end = end;\n      if (g = fragmentByStart[end]) {\n        delete fragmentByStart[g.start];\n        var fg = g === f ? f : f.concat(g);\n        fragmentByStart[fg.start = f.start] = fragmentByEnd[fg.end = g.end] = fg;\n      } else {\n        fragmentByStart[f.start] = fragmentByEnd[f.end] = f;\n      }\n    } else if (f = fragmentByStart[end]) {\n      delete fragmentByStart[f.start];\n      f.unshift(i);\n      f.start = start;\n      if (g = fragmentByEnd[start]) {\n        delete fragmentByEnd[g.end];\n        var gf = g === f ? f : g.concat(f);\n        fragmentByStart[gf.start = g.start] = fragmentByEnd[gf.end = f.end] = gf;\n      } else {\n        fragmentByStart[f.start] = fragmentByEnd[f.end] = f;\n      }\n    } else {\n      f = [i];\n      fragmentByStart[f.start = start] = fragmentByEnd[f.end = end] = f;\n    }\n  });\n\n  function ends(i) {\n    var arc = topology.arcs[i < 0 ? ~i : i], p0 = arc[0], p1;\n    if (topology.transform) p1 = [0, 0], arc.forEach(function(dp) { p1[0] += dp[0], p1[1] += dp[1]; });\n    else p1 = arc[arc.length - 1];\n    return i < 0 ? [p1, p0] : [p0, p1];\n  }\n\n  function flush(fragmentByEnd, fragmentByStart) {\n    for (var k in fragmentByEnd) {\n      var f = fragmentByEnd[k];\n      delete fragmentByStart[f.start];\n      delete f.start;\n      delete f.end;\n      f.forEach(function(i) { stitchedArcs[i < 0 ? ~i : i] = 1; });\n      fragments.push(f);\n    }\n  }\n\n  flush(fragmentByEnd, fragmentByStart);\n  flush(fragmentByStart, fragmentByEnd);\n  arcs.forEach(function(i) { if (!stitchedArcs[i < 0 ? ~i : i]) fragments.push([i]); });\n\n  return fragments;\n}\n","import {object} from \"./feature\";\nimport stitch from \"./stitch\";\n\nexport default function(topology) {\n  return object(topology, meshArcs.apply(this, arguments));\n}\n\nexport function meshArcs(topology, object, filter) {\n  var arcs, i, n;\n  if (arguments.length > 1) arcs = extractArcs(topology, object, filter);\n  else for (i = 0, arcs = new Array(n = topology.arcs.length); i < n; ++i) arcs[i] = i;\n  return {type: \"MultiLineString\", arcs: stitch(topology, arcs)};\n}\n\nfunction extractArcs(topology, object, filter) {\n  var arcs = [],\n      geomsByArc = [],\n      geom;\n\n  function extract0(i) {\n    var j = i < 0 ? ~i : i;\n    (geomsByArc[j] || (geomsByArc[j] = [])).push({i: i, g: geom});\n  }\n\n  function extract1(arcs) {\n    arcs.forEach(extract0);\n  }\n\n  function extract2(arcs) {\n    arcs.forEach(extract1);\n  }\n\n  function extract3(arcs) {\n    arcs.forEach(extract2);\n  }\n\n  function geometry(o) {\n    switch (geom = o, o.type) {\n      case \"GeometryCollection\": o.geometries.forEach(geometry); break;\n      case \"LineString\": extract1(o.arcs); break;\n      case \"MultiLineString\": case \"Polygon\": extract2(o.arcs); break;\n      case \"MultiPolygon\": extract3(o.arcs); break;\n    }\n  }\n\n  geometry(object);\n\n  geomsByArc.forEach(filter == null\n      ? function(geoms) { arcs.push(geoms[0].i); }\n      : function(geoms) { if (filter(geoms[0].g, geoms[geoms.length - 1].g)) arcs.push(geoms[0].i); });\n\n  return arcs;\n}\n","import {object} from \"./feature\";\nimport stitch from \"./stitch\";\n\nfunction planarRingArea(ring) {\n  var i = -1, n = ring.length, a, b = ring[n - 1], area = 0;\n  while (++i < n) a = b, b = ring[i], area += a[0] * b[1] - a[1] * b[0];\n  return Math.abs(area); // Note: doubled area!\n}\n\nexport default function(topology) {\n  return object(topology, mergeArcs.apply(this, arguments));\n}\n\nexport function mergeArcs(topology, objects) {\n  var polygonsByArc = {},\n      polygons = [],\n      groups = [];\n\n  objects.forEach(geometry);\n\n  function geometry(o) {\n    switch (o.type) {\n      case \"GeometryCollection\": o.geometries.forEach(geometry); break;\n      case \"Polygon\": extract(o.arcs); break;\n      case \"MultiPolygon\": o.arcs.forEach(extract); break;\n    }\n  }\n\n  function extract(polygon) {\n    polygon.forEach(function(ring) {\n      ring.forEach(function(arc) {\n        (polygonsByArc[arc = arc < 0 ? ~arc : arc] || (polygonsByArc[arc] = [])).push(polygon);\n      });\n    });\n    polygons.push(polygon);\n  }\n\n  function area(ring) {\n    return planarRingArea(object(topology, {type: \"Polygon\", arcs: [ring]}).coordinates[0]);\n  }\n\n  polygons.forEach(function(polygon) {\n    if (!polygon._) {\n      var group = [],\n          neighbors = [polygon];\n      polygon._ = 1;\n      groups.push(group);\n      while (polygon = neighbors.pop()) {\n        group.push(polygon);\n        polygon.forEach(function(ring) {\n          ring.forEach(function(arc) {\n            polygonsByArc[arc < 0 ? ~arc : arc].forEach(function(polygon) {\n              if (!polygon._) {\n                polygon._ = 1;\n                neighbors.push(polygon);\n              }\n            });\n          });\n        });\n      }\n    }\n  });\n\n  polygons.forEach(function(polygon) {\n    delete polygon._;\n  });\n\n  return {\n    type: \"MultiPolygon\",\n    arcs: groups.map(function(polygons) {\n      var arcs = [], n;\n\n      // Extract the exterior (unique) arcs.\n      polygons.forEach(function(polygon) {\n        polygon.forEach(function(ring) {\n          ring.forEach(function(arc) {\n            if (polygonsByArc[arc < 0 ? ~arc : arc].length < 2) {\n              arcs.push(arc);\n            }\n          });\n        });\n      });\n\n      // Stitch the arcs into one or more rings.\n      arcs = stitch(topology, arcs);\n\n      // If more than one ring is returned,\n      // at most one of these rings can be the exterior;\n      // choose the one with the greatest absolute area.\n      if ((n = arcs.length) > 1) {\n        for (var i = 1, k = area(arcs[0]), ki, t; i < n; ++i) {\n          if ((ki = area(arcs[i])) > k) {\n            t = arcs[0], arcs[0] = arcs[i], arcs[i] = t, k = ki;\n          }\n        }\n      }\n\n      return arcs;\n    })\n  };\n}\n","export default function(a, x) {\n  var lo = 0, hi = a.length;\n  while (lo < hi) {\n    var mid = lo + hi >>> 1;\n    if (a[mid] < x) lo = mid + 1;\n    else hi = mid;\n  }\n  return lo;\n}\n","import bisect from \"./bisect\";\n\nexport default function(objects) {\n  var indexesByArc = {}, // arc index -> array of object indexes\n      neighbors = objects.map(function() { return []; });\n\n  function line(arcs, i) {\n    arcs.forEach(function(a) {\n      if (a < 0) a = ~a;\n      var o = indexesByArc[a];\n      if (o) o.push(i);\n      else indexesByArc[a] = [i];\n    });\n  }\n\n  function polygon(arcs, i) {\n    arcs.forEach(function(arc) { line(arc, i); });\n  }\n\n  function geometry(o, i) {\n    if (o.type === \"GeometryCollection\") o.geometries.forEach(function(o) { geometry(o, i); });\n    else if (o.type in geometryType) geometryType[o.type](o.arcs, i);\n  }\n\n  var geometryType = {\n    LineString: line,\n    MultiLineString: polygon,\n    Polygon: polygon,\n    MultiPolygon: function(arcs, i) { arcs.forEach(function(arc) { polygon(arc, i); }); }\n  };\n\n  objects.forEach(geometry);\n\n  for (var i in indexesByArc) {\n    for (var indexes = indexesByArc[i], m = indexes.length, j = 0; j < m; ++j) {\n      for (var k = j + 1; k < m; ++k) {\n        var ij = indexes[j], ik = indexes[k], n;\n        if ((n = neighbors[ij])[i = bisect(n, ik)] !== ik) n.splice(i, 0, ik);\n        if ((n = neighbors[ik])[i = bisect(n, ij)] !== ij) n.splice(i, 0, ij);\n      }\n    }\n  }\n\n  return neighbors;\n}\n","import identity from \"./identity\";\n\nexport default function(transform) {\n  if (transform == null) return identity;\n  var x0,\n      y0,\n      kx = transform.scale[0],\n      ky = transform.scale[1],\n      dx = transform.translate[0],\n      dy = transform.translate[1];\n  return function(input, i) {\n    if (!i) x0 = y0 = 0;\n    var j = 2,\n        n = input.length,\n        output = new Array(n),\n        x1 = Math.round((input[0] - dx) / kx),\n        y1 = Math.round((input[1] - dy) / ky);\n    output[0] = x1 - x0, x0 = x1;\n    output[1] = y1 - y0, y0 = y1;\n    while (j < n) output[j] = input[j], ++j;\n    return output;\n  };\n}\n","import bbox from \"./bbox\";\nimport untransform from \"./untransform\";\n\nexport default function(topology, transform) {\n  if (topology.transform) throw new Error(\"already quantized\");\n\n  if (!transform || !transform.scale) {\n    if (!((n = Math.floor(transform)) >= 2)) throw new Error(\"n must be 2\");\n    box = topology.bbox || bbox(topology);\n    var x0 = box[0], y0 = box[1], x1 = box[2], y1 = box[3], n;\n    transform = {scale: [x1 - x0 ? (x1 - x0) / (n - 1) : 1, y1 - y0 ? (y1 - y0) / (n - 1) : 1], translate: [x0, y0]};\n  } else {\n    box = topology.bbox;\n  }\n\n  var t = untransform(transform), box, key, inputs = topology.objects, outputs = {};\n\n  function quantizePoint(point) {\n    return t(point);\n  }\n\n  function quantizeGeometry(input) {\n    var output;\n    switch (input.type) {\n      case \"GeometryCollection\": output = {type: \"GeometryCollection\", geometries: input.geometries.map(quantizeGeometry)}; break;\n      case \"Point\": output = {type: \"Point\", coordinates: quantizePoint(input.coordinates)}; break;\n      case \"MultiPoint\": output = {type: \"MultiPoint\", coordinates: input.coordinates.map(quantizePoint)}; break;\n      default: return input;\n    }\n    if (input.id != null) output.id = input.id;\n    if (input.bbox != null) output.bbox = input.bbox;\n    if (input.properties != null) output.properties = input.properties;\n    return output;\n  }\n\n  function quantizeArc(input) {\n    var i = 0, j = 1, n = input.length, p, output = new Array(n); // pessimistic\n    output[0] = t(input[0], 0);\n    while (++i < n) if ((p = t(input[i], i))[0] || p[1]) output[j++] = p; // non-coincident points\n    if (j === 1) output[j++] = [0, 0]; // an arc must have at least two points\n    output.length = j;\n    return output;\n  }\n\n  for (key in inputs) outputs[key] = quantizeGeometry(inputs[key]);\n\n  return {\n    type: \"Topology\",\n    bbox: box,\n    transform: transform,\n    objects: outputs,\n    arcs: topology.arcs.map(quantizeArc)\n  };\n}\n","export {default as bbox} from \"./src/bbox\";\nexport {default as feature} from \"./src/feature\";\nexport {default as mesh, meshArcs} from \"./src/mesh\";\nexport {default as merge, mergeArcs} from \"./src/merge\";\nexport {default as neighbors} from \"./src/neighbors\";\nexport {default as quantize} from \"./src/quantize\";\nexport {default as transform} from \"./src/transform\";\nexport {default as untransform} from \"./src/untransform\";\n","// Computes the bounding box of the specified hash of GeoJSON objects.\nexport default function(objects) {\n  var x0 = Infinity,\n      y0 = Infinity,\n      x1 = -Infinity,\n      y1 = -Infinity;\n\n  function boundGeometry(geometry) {\n    if (geometry != null && boundGeometryType.hasOwnProperty(geometry.type)) boundGeometryType[geometry.type](geometry);\n  }\n\n  var boundGeometryType = {\n    GeometryCollection: function(o) { o.geometries.forEach(boundGeometry); },\n    Point: function(o) { boundPoint(o.coordinates); },\n    MultiPoint: function(o) { o.coordinates.forEach(boundPoint); },\n    LineString: function(o) { boundLine(o.arcs); },\n    MultiLineString: function(o) { o.arcs.forEach(boundLine); },\n    Polygon: function(o) { o.arcs.forEach(boundLine); },\n    MultiPolygon: function(o) { o.arcs.forEach(boundMultiLine); }\n  };\n\n  function boundPoint(coordinates) {\n    var x = coordinates[0],\n        y = coordinates[1];\n    if (x < x0) x0 = x;\n    if (x > x1) x1 = x;\n    if (y < y0) y0 = y;\n    if (y > y1) y1 = y;\n  }\n\n  function boundLine(coordinates) {\n    coordinates.forEach(boundPoint);\n  }\n\n  function boundMultiLine(coordinates) {\n    coordinates.forEach(boundLine);\n  }\n\n  for (var key in objects) {\n    boundGeometry(objects[key]);\n  }\n\n  return x1 >= x0 && y1 >= y0 ? [x0, y0, x1, y1] : undefined;\n}\n","export default function(size, hash, equal, type, empty) {\n  if (arguments.length === 3) {\n    type = Array;\n    empty = null;\n  }\n\n  var store = new type(size = 1 << Math.max(4, Math.ceil(Math.log(size) / Math.LN2))),\n      mask = size - 1;\n\n  for (var i = 0; i < size; ++i) {\n    store[i] = empty;\n  }\n\n  function add(value) {\n    var index = hash(value) & mask,\n        match = store[index],\n        collisions = 0;\n    while (match != empty) {\n      if (equal(match, value)) return true;\n      if (++collisions >= size) throw new Error(\"full hashset\");\n      match = store[index = (index + 1) & mask];\n    }\n    store[index] = value;\n    return true;\n  }\n\n  function has(value) {\n    var index = hash(value) & mask,\n        match = store[index],\n        collisions = 0;\n    while (match != empty) {\n      if (equal(match, value)) return true;\n      if (++collisions >= size) break;\n      match = store[index = (index + 1) & mask];\n    }\n    return false;\n  }\n\n  function values() {\n    var values = [];\n    for (var i = 0, n = store.length; i < n; ++i) {\n      var match = store[i];\n      if (match != empty) values.push(match);\n    }\n    return values;\n  }\n\n  return {\n    add: add,\n    has: has,\n    values: values\n  };\n}\n","export default function(size, hash, equal, keyType, keyEmpty, valueType) {\n  if (arguments.length === 3) {\n    keyType = valueType = Array;\n    keyEmpty = null;\n  }\n\n  var keystore = new keyType(size = 1 << Math.max(4, Math.ceil(Math.log(size) / Math.LN2))),\n      valstore = new valueType(size),\n      mask = size - 1;\n\n  for (var i = 0; i < size; ++i) {\n    keystore[i] = keyEmpty;\n  }\n\n  function set(key, value) {\n    var index = hash(key) & mask,\n        matchKey = keystore[index],\n        collisions = 0;\n    while (matchKey != keyEmpty) {\n      if (equal(matchKey, key)) return valstore[index] = value;\n      if (++collisions >= size) throw new Error(\"full hashmap\");\n      matchKey = keystore[index = (index + 1) & mask];\n    }\n    keystore[index] = key;\n    valstore[index] = value;\n    return value;\n  }\n\n  function maybeSet(key, value) {\n    var index = hash(key) & mask,\n        matchKey = keystore[index],\n        collisions = 0;\n    while (matchKey != keyEmpty) {\n      if (equal(matchKey, key)) return valstore[index];\n      if (++collisions >= size) throw new Error(\"full hashmap\");\n      matchKey = keystore[index = (index + 1) & mask];\n    }\n    keystore[index] = key;\n    valstore[index] = value;\n    return value;\n  }\n\n  function get(key, missingValue) {\n    var index = hash(key) & mask,\n        matchKey = keystore[index],\n        collisions = 0;\n    while (matchKey != keyEmpty) {\n      if (equal(matchKey, key)) return valstore[index];\n      if (++collisions >= size) break;\n      matchKey = keystore[index = (index + 1) & mask];\n    }\n    return missingValue;\n  }\n\n  function keys() {\n    var keys = [];\n    for (var i = 0, n = keystore.length; i < n; ++i) {\n      var matchKey = keystore[i];\n      if (matchKey != keyEmpty) keys.push(matchKey);\n    }\n    return keys;\n  }\n\n  return {\n    set: set,\n    maybeSet: maybeSet, // set if unset\n    get: get,\n    keys: keys\n  };\n}\n","export default function(pointA, pointB) {\n  return pointA[0] === pointB[0] && pointA[1] === pointB[1];\n}\n","// TODO if quantized, use simpler Int32 hashing?\n\nvar buffer = new ArrayBuffer(16),\n    floats = new Float64Array(buffer),\n    uints = new Uint32Array(buffer);\n\nexport default function(point) {\n  floats[0] = point[0];\n  floats[1] = point[1];\n  var hash = uints[0] ^ uints[1];\n  hash = hash << 5 ^ hash >> 7 ^ uints[2] ^ uints[3];\n  return hash & 0x7fffffff;\n}\n","import hashset from \"./hash/hashset\";\nimport hashmap from \"./hash/hashmap\";\nimport equalPoint from \"./hash/point-equal\";\nimport hashPoint from \"./hash/point-hash\";\n\n// Given an extracted (pre-)topology, identifies all of the junctions. These are\n// the points at which arcs (lines or rings) will need to be cut so that each\n// arc is represented uniquely.\n//\n// A junction is a point where at least one arc deviates from another arc going\n// through the same point. For example, consider the point B. If there is a arc\n// through ABC and another arc through CBA, then B is not a junction because in\n// both cases the adjacent point pairs are {A,C}. However, if there is an\n// additional arc ABD, then {A,D} != {A,C}, and thus B becomes a junction.\n//\n// For a closed ring ABCA, the first point As adjacent points are the second\n// and last point {B,C}. For a line, the first and last point are always\n// considered junctions, even if the line is closed; this ensures that a closed\n// line is never rotated.\nexport default function(topology) {\n  var coordinates = topology.coordinates,\n      lines = topology.lines,\n      rings = topology.rings,\n      indexes = index(),\n      visitedByIndex = new Int32Array(coordinates.length),\n      leftByIndex = new Int32Array(coordinates.length),\n      rightByIndex = new Int32Array(coordinates.length),\n      junctionByIndex = new Int8Array(coordinates.length),\n      junctionCount = 0, // upper bound on number of junctions\n      i, n,\n      previousIndex,\n      currentIndex,\n      nextIndex;\n\n  for (i = 0, n = coordinates.length; i < n; ++i) {\n    visitedByIndex[i] = leftByIndex[i] = rightByIndex[i] = -1;\n  }\n\n  for (i = 0, n = lines.length; i < n; ++i) {\n    var line = lines[i],\n        lineStart = line[0],\n        lineEnd = line[1];\n    currentIndex = indexes[lineStart];\n    nextIndex = indexes[++lineStart];\n    ++junctionCount, junctionByIndex[currentIndex] = 1; // start\n    while (++lineStart <= lineEnd) {\n      sequence(i, previousIndex = currentIndex, currentIndex = nextIndex, nextIndex = indexes[lineStart]);\n    }\n    ++junctionCount, junctionByIndex[nextIndex] = 1; // end\n  }\n\n  for (i = 0, n = coordinates.length; i < n; ++i) {\n    visitedByIndex[i] = -1;\n  }\n\n  for (i = 0, n = rings.length; i < n; ++i) {\n    var ring = rings[i],\n        ringStart = ring[0] + 1,\n        ringEnd = ring[1];\n    previousIndex = indexes[ringEnd - 1];\n    currentIndex = indexes[ringStart - 1];\n    nextIndex = indexes[ringStart];\n    sequence(i, previousIndex, currentIndex, nextIndex);\n    while (++ringStart <= ringEnd) {\n      sequence(i, previousIndex = currentIndex, currentIndex = nextIndex, nextIndex = indexes[ringStart]);\n    }\n  }\n\n  function sequence(i, previousIndex, currentIndex, nextIndex) {\n    if (visitedByIndex[currentIndex] === i) return; // ignore self-intersection\n    visitedByIndex[currentIndex] = i;\n    var leftIndex = leftByIndex[currentIndex];\n    if (leftIndex >= 0) {\n      var rightIndex = rightByIndex[currentIndex];\n      if ((leftIndex !== previousIndex || rightIndex !== nextIndex)\n        && (leftIndex !== nextIndex || rightIndex !== previousIndex)) {\n        ++junctionCount, junctionByIndex[currentIndex] = 1;\n      }\n    } else {\n      leftByIndex[currentIndex] = previousIndex;\n      rightByIndex[currentIndex] = nextIndex;\n    }\n  }\n\n  function index() {\n    var indexByPoint = hashmap(coordinates.length * 1.4, hashIndex, equalIndex, Int32Array, -1, Int32Array),\n        indexes = new Int32Array(coordinates.length);\n\n    for (var i = 0, n = coordinates.length; i < n; ++i) {\n      indexes[i] = indexByPoint.maybeSet(i, i);\n    }\n\n    return indexes;\n  }\n\n  function hashIndex(i) {\n    return hashPoint(coordinates[i]);\n  }\n\n  function equalIndex(i, j) {\n    return equalPoint(coordinates[i], coordinates[j]);\n  }\n\n  visitedByIndex = leftByIndex = rightByIndex = null;\n\n  var junctionByPoint = hashset(junctionCount * 1.4, hashPoint, equalPoint), j;\n\n  // Convert back to a standard hashset by point for caller convenience.\n  for (i = 0, n = coordinates.length; i < n; ++i) {\n    if (junctionByIndex[j = indexes[i]]) {\n      junctionByPoint.add(coordinates[j]);\n    }\n  }\n\n  return junctionByPoint;\n}\n","import join from \"./join\";\n\n// Given an extracted (pre-)topology, cuts (or rotates) arcs so that all shared\n// point sequences are identified. The topology can then be subsequently deduped\n// to remove exact duplicate arcs.\nexport default function(topology) {\n  var junctions = join(topology),\n      coordinates = topology.coordinates,\n      lines = topology.lines,\n      rings = topology.rings,\n      next,\n      i, n;\n\n  for (i = 0, n = lines.length; i < n; ++i) {\n    var line = lines[i],\n        lineMid = line[0],\n        lineEnd = line[1];\n    while (++lineMid < lineEnd) {\n      if (junctions.has(coordinates[lineMid])) {\n        next = {0: lineMid, 1: line[1]};\n        line[1] = lineMid;\n        line = line.next = next;\n      }\n    }\n  }\n\n  for (i = 0, n = rings.length; i < n; ++i) {\n    var ring = rings[i],\n        ringStart = ring[0],\n        ringMid = ringStart,\n        ringEnd = ring[1],\n        ringFixed = junctions.has(coordinates[ringStart]);\n    while (++ringMid < ringEnd) {\n      if (junctions.has(coordinates[ringMid])) {\n        if (ringFixed) {\n          next = {0: ringMid, 1: ring[1]};\n          ring[1] = ringMid;\n          ring = ring.next = next;\n        } else { // For the first junction, we can rotate rather than cut.\n          rotateArray(coordinates, ringStart, ringEnd, ringEnd - ringMid);\n          coordinates[ringEnd] = coordinates[ringStart];\n          ringFixed = true;\n          ringMid = ringStart; // restart; we may have skipped junctions\n        }\n      }\n    }\n  }\n\n  return topology;\n}\n\nfunction rotateArray(array, start, end, offset) {\n  reverse(array, start, end);\n  reverse(array, start, start + offset);\n  reverse(array, start + offset, end);\n}\n\nfunction reverse(array, start, end) {\n  for (var mid = start + ((end-- - start) >> 1), t; start < mid; ++start, --end) {\n    t = array[start], array[start] = array[end], array[end] = t;\n  }\n}\n","import hashmap from \"./hash/hashmap\";\nimport equalPoint from \"./hash/point-equal\";\nimport hashPoint from \"./hash/point-hash\";\n\n// Given a cut topology, combines duplicate arcs.\nexport default function(topology) {\n  var coordinates = topology.coordinates,\n      lines = topology.lines, line,\n      rings = topology.rings, ring,\n      arcCount = lines.length + rings.length,\n      i, n;\n\n  delete topology.lines;\n  delete topology.rings;\n\n  // Count the number of (non-unique) arcs to initialize the hashmap safely.\n  for (i = 0, n = lines.length; i < n; ++i) {\n    line = lines[i]; while (line = line.next) ++arcCount;\n  }\n  for (i = 0, n = rings.length; i < n; ++i) {\n    ring = rings[i]; while (ring = ring.next) ++arcCount;\n  }\n\n  var arcsByEnd = hashmap(arcCount * 2 * 1.4, hashPoint, equalPoint),\n      arcs = topology.arcs = [];\n\n  for (i = 0, n = lines.length; i < n; ++i) {\n    line = lines[i];\n    do {\n      dedupLine(line);\n    } while (line = line.next);\n  }\n\n  for (i = 0, n = rings.length; i < n; ++i) {\n    ring = rings[i];\n    if (ring.next) { // arc is no longer closed\n      do {\n        dedupLine(ring);\n      } while (ring = ring.next);\n    } else {\n      dedupRing(ring);\n    }\n  }\n\n  function dedupLine(arc) {\n    var startPoint,\n        endPoint,\n        startArcs, startArc,\n        endArcs, endArc,\n        i, n;\n\n    // Does this arc match an existing arc in order?\n    if (startArcs = arcsByEnd.get(startPoint = coordinates[arc[0]])) {\n      for (i = 0, n = startArcs.length; i < n; ++i) {\n        startArc = startArcs[i];\n        if (equalLine(startArc, arc)) {\n          arc[0] = startArc[0];\n          arc[1] = startArc[1];\n          return;\n        }\n      }\n    }\n\n    // Does this arc match an existing arc in reverse order?\n    if (endArcs = arcsByEnd.get(endPoint = coordinates[arc[1]])) {\n      for (i = 0, n = endArcs.length; i < n; ++i) {\n        endArc = endArcs[i];\n        if (reverseEqualLine(endArc, arc)) {\n          arc[1] = endArc[0];\n          arc[0] = endArc[1];\n          return;\n        }\n      }\n    }\n\n    if (startArcs) startArcs.push(arc); else arcsByEnd.set(startPoint, [arc]);\n    if (endArcs) endArcs.push(arc); else arcsByEnd.set(endPoint, [arc]);\n    arcs.push(arc);\n  }\n\n  function dedupRing(arc) {\n    var endPoint,\n        endArcs,\n        endArc,\n        i, n;\n\n    // Does this arc match an existing line in order, or reverse order?\n    // Rings are closed, so their start point and end point is the same.\n    if (endArcs = arcsByEnd.get(endPoint = coordinates[arc[0]])) {\n      for (i = 0, n = endArcs.length; i < n; ++i) {\n        endArc = endArcs[i];\n        if (equalRing(endArc, arc)) {\n          arc[0] = endArc[0];\n          arc[1] = endArc[1];\n          return;\n        }\n        if (reverseEqualRing(endArc, arc)) {\n          arc[0] = endArc[1];\n          arc[1] = endArc[0];\n          return;\n        }\n      }\n    }\n\n    // Otherwise, does this arc match an existing ring in order, or reverse order?\n    if (endArcs = arcsByEnd.get(endPoint = coordinates[arc[0] + findMinimumOffset(arc)])) {\n      for (i = 0, n = endArcs.length; i < n; ++i) {\n        endArc = endArcs[i];\n        if (equalRing(endArc, arc)) {\n          arc[0] = endArc[0];\n          arc[1] = endArc[1];\n          return;\n        }\n        if (reverseEqualRing(endArc, arc)) {\n          arc[0] = endArc[1];\n          arc[1] = endArc[0];\n          return;\n        }\n      }\n    }\n\n    if (endArcs) endArcs.push(arc); else arcsByEnd.set(endPoint, [arc]);\n    arcs.push(arc);\n  }\n\n  function equalLine(arcA, arcB) {\n    var ia = arcA[0], ib = arcB[0],\n        ja = arcA[1], jb = arcB[1];\n    if (ia - ja !== ib - jb) return false;\n    for (; ia <= ja; ++ia, ++ib) if (!equalPoint(coordinates[ia], coordinates[ib])) return false;\n    return true;\n  }\n\n  function reverseEqualLine(arcA, arcB) {\n    var ia = arcA[0], ib = arcB[0],\n        ja = arcA[1], jb = arcB[1];\n    if (ia - ja !== ib - jb) return false;\n    for (; ia <= ja; ++ia, --jb) if (!equalPoint(coordinates[ia], coordinates[jb])) return false;\n    return true;\n  }\n\n  function equalRing(arcA, arcB) {\n    var ia = arcA[0], ib = arcB[0],\n        ja = arcA[1], jb = arcB[1],\n        n = ja - ia;\n    if (n !== jb - ib) return false;\n    var ka = findMinimumOffset(arcA),\n        kb = findMinimumOffset(arcB);\n    for (var i = 0; i < n; ++i) {\n      if (!equalPoint(coordinates[ia + (i + ka) % n], coordinates[ib + (i + kb) % n])) return false;\n    }\n    return true;\n  }\n\n  function reverseEqualRing(arcA, arcB) {\n    var ia = arcA[0], ib = arcB[0],\n        ja = arcA[1], jb = arcB[1],\n        n = ja - ia;\n    if (n !== jb - ib) return false;\n    var ka = findMinimumOffset(arcA),\n        kb = n - findMinimumOffset(arcB);\n    for (var i = 0; i < n; ++i) {\n      if (!equalPoint(coordinates[ia + (i + ka) % n], coordinates[jb - (i + kb) % n])) return false;\n    }\n    return true;\n  }\n\n  // Rings are rotated to a consistent, but arbitrary, start point.\n  // This is necessary to detect when a ring and a rotated copy are dupes.\n  function findMinimumOffset(arc) {\n    var start = arc[0],\n        end = arc[1],\n        mid = start,\n        minimum = mid,\n        minimumPoint = coordinates[mid];\n    while (++mid < end) {\n      var point = coordinates[mid];\n      if (point[0] < minimumPoint[0] || point[0] === minimumPoint[0] && point[1] < minimumPoint[1]) {\n        minimum = mid;\n        minimumPoint = point;\n      }\n    }\n    return minimum - start;\n  }\n\n  return topology;\n}\n","// Given an array of arcs in absolute (but already quantized!) coordinates,\n// converts to fixed-point delta encoding.\n// This is a destructive operation that modifies the given arcs!\nexport default function(arcs) {\n  var i = -1,\n      n = arcs.length;\n\n  while (++i < n) {\n    var arc = arcs[i],\n        j = 0,\n        k = 1,\n        m = arc.length,\n        point = arc[0],\n        x0 = point[0],\n        y0 = point[1],\n        x1,\n        y1;\n\n    while (++j < m) {\n      point = arc[j], x1 = point[0], y1 = point[1];\n      if (x1 !== x0 || y1 !== y0) arc[k++] = [x1 - x0, y1 - y0], x0 = x1, y0 = y1;\n    }\n\n    if (k === 1) arc[k++] = [0, 0]; // Each arc must be an array of two or more positions.\n\n    arc.length = k;\n  }\n\n  return arcs;\n}\n","// Extracts the lines and rings from the specified hash of geometry objects.\n//\n// Returns an object with three properties:\n//\n// * coordinates - shared buffer of [x, y] coordinates\n// * lines - lines extracted from the hash, of the form [start, end]\n// * rings - rings extracted from the hash, of the form [start, end]\n//\n// For each ring or line, start and end represent inclusive indexes into the\n// coordinates buffer. For rings (and closed lines), coordinates[start] equals\n// coordinates[end].\n//\n// For each line or polygon geometry in the input hash, including nested\n// geometries as in geometry collections, the `coordinates` array is replaced\n// with an equivalent `arcs` array that, for each line (for line string\n// geometries) or ring (for polygon geometries), points to one of the above\n// lines or rings.\nexport default function(objects) {\n  var index = -1,\n      lines = [],\n      rings = [],\n      coordinates = [];\n\n  function extractGeometry(geometry) {\n    if (geometry && extractGeometryType.hasOwnProperty(geometry.type)) extractGeometryType[geometry.type](geometry);\n  }\n\n  var extractGeometryType = {\n    GeometryCollection: function(o) { o.geometries.forEach(extractGeometry); },\n    LineString: function(o) { o.arcs = extractLine(o.arcs); },\n    MultiLineString: function(o) { o.arcs = o.arcs.map(extractLine); },\n    Polygon: function(o) { o.arcs = o.arcs.map(extractRing); },\n    MultiPolygon: function(o) { o.arcs = o.arcs.map(extractMultiRing); }\n  };\n\n  function extractLine(line) {\n    for (var i = 0, n = line.length; i < n; ++i) coordinates[++index] = line[i];\n    var arc = {0: index - n + 1, 1: index};\n    lines.push(arc);\n    return arc;\n  }\n\n  function extractRing(ring) {\n    for (var i = 0, n = ring.length; i < n; ++i) coordinates[++index] = ring[i];\n    var arc = {0: index - n + 1, 1: index};\n    rings.push(arc);\n    return arc;\n  }\n\n  function extractMultiRing(rings) {\n    return rings.map(extractRing);\n  }\n\n  for (var key in objects) {\n    extractGeometry(objects[key]);\n  }\n\n  return {\n    type: \"Topology\",\n    coordinates: coordinates,\n    lines: lines,\n    rings: rings,\n    objects: objects\n  };\n}\n","// Given a hash of GeoJSON objects, returns a hash of GeoJSON geometry objects.\n// Any null input geometry objects are represented as {type: null} in the output.\n// Any feature.{id,properties,bbox} are transferred to the output geometry object.\n// Each output geometry object is a shallow copy of the input (e.g., properties, coordinates)!\nexport default function(inputs) {\n  var outputs = {}, key;\n  for (key in inputs) outputs[key] = geomifyObject(inputs[key]);\n  return outputs;\n}\n\nfunction geomifyObject(input) {\n  return input == null ? {type: null}\n      : (input.type === \"FeatureCollection\" ? geomifyFeatureCollection\n      : input.type === \"Feature\" ? geomifyFeature\n      : geomifyGeometry)(input);\n}\n\nfunction geomifyFeatureCollection(input) {\n  var output = {type: \"GeometryCollection\", geometries: input.features.map(geomifyFeature)};\n  if (input.bbox != null) output.bbox = input.bbox;\n  return output;\n}\n\nfunction geomifyFeature(input) {\n  var output = geomifyGeometry(input.geometry), key; // eslint-disable-line no-unused-vars\n  if (input.id != null) output.id = input.id;\n  if (input.bbox != null) output.bbox = input.bbox;\n  for (key in input.properties) { output.properties = input.properties; break; }\n  return output;\n}\n\nfunction geomifyGeometry(input) {\n  if (input == null) return {type: null};\n  var output = input.type === \"GeometryCollection\" ? {type: \"GeometryCollection\", geometries: input.geometries.map(geomifyGeometry)}\n      : input.type === \"Point\" || input.type === \"MultiPoint\" ? {type: input.type, coordinates: input.coordinates}\n      : {type: input.type, arcs: input.coordinates}; // TODO Check for unknown types?\n  if (input.bbox != null) output.bbox = input.bbox;\n  return output;\n}\n","export default function(objects, bbox, n) {\n  var x0 = bbox[0],\n      y0 = bbox[1],\n      x1 = bbox[2],\n      y1 = bbox[3],\n      kx = x1 - x0 ? (n - 1) / (x1 - x0) : 1,\n      ky = y1 - y0 ? (n - 1) / (y1 - y0) : 1;\n\n  function quantizePoint(input) {\n    return [Math.round((input[0] - x0) * kx), Math.round((input[1] - y0) * ky)];\n  }\n\n  function quantizePoints(input, m) {\n    var i = -1,\n        j = 0,\n        n = input.length,\n        output = new Array(n), // pessimistic\n        pi,\n        px,\n        py,\n        x,\n        y;\n\n    while (++i < n) {\n      pi = input[i];\n      x = Math.round((pi[0] - x0) * kx);\n      y = Math.round((pi[1] - y0) * ky);\n      if (x !== px || y !== py) output[j++] = [px = x, py = y]; // non-coincident points\n    }\n\n    output.length = j;\n    while (j < m) j = output.push([output[0][0], output[0][1]]);\n    return output;\n  }\n\n  function quantizeLine(input) {\n    return quantizePoints(input, 2);\n  }\n\n  function quantizeRing(input) {\n    return quantizePoints(input, 4);\n  }\n\n  function quantizePolygon(input) {\n    return input.map(quantizeRing);\n  }\n\n  function quantizeGeometry(o) {\n    if (o != null && quantizeGeometryType.hasOwnProperty(o.type)) quantizeGeometryType[o.type](o);\n  }\n\n  var quantizeGeometryType = {\n    GeometryCollection: function(o) { o.geometries.forEach(quantizeGeometry); },\n    Point: function(o) { o.coordinates = quantizePoint(o.coordinates); },\n    MultiPoint: function(o) { o.coordinates = o.coordinates.map(quantizePoint); },\n    LineString: function(o) { o.arcs = quantizeLine(o.arcs); },\n    MultiLineString: function(o) { o.arcs = o.arcs.map(quantizeLine); },\n    Polygon: function(o) { o.arcs = quantizePolygon(o.arcs); },\n    MultiPolygon: function(o) { o.arcs = o.arcs.map(quantizePolygon); }\n  };\n\n  for (var key in objects) {\n    quantizeGeometry(objects[key]);\n  }\n\n  return {\n    scale: [1 / kx, 1 / ky],\n    translate: [x0, y0]\n  };\n}\n","import bounds from \"./bounds\";\nimport cut from \"./cut\";\nimport dedup from \"./dedup\";\nimport delta from \"./delta\";\nimport extract from \"./extract\";\nimport geometry from \"./geometry\";\nimport hashmap from \"./hash/hashmap\";\nimport prequantize from \"./prequantize\";\n\n// Constructs the TopoJSON Topology for the specified hash of features.\n// Each object in the specified hash must be a GeoJSON object,\n// meaning FeatureCollection, a Feature or a geometry object.\nexport default function(objects, quantization) {\n  var bbox = bounds(objects = geometry(objects)),\n      transform = quantization > 0 && bbox && prequantize(objects, bbox, quantization),\n      topology = dedup(cut(extract(objects))),\n      coordinates = topology.coordinates,\n      indexByArc = hashmap(topology.arcs.length * 1.4, hashArc, equalArc);\n\n  objects = topology.objects; // for garbage collection\n  topology.bbox = bbox;\n  topology.arcs = topology.arcs.map(function(arc, i) {\n    indexByArc.set(arc, i);\n    return coordinates.slice(arc[0], arc[1] + 1);\n  });\n\n  delete topology.coordinates;\n  coordinates = null;\n\n  function indexGeometry(geometry) {\n    if (geometry && indexGeometryType.hasOwnProperty(geometry.type)) indexGeometryType[geometry.type](geometry);\n  }\n\n  var indexGeometryType = {\n    GeometryCollection: function(o) { o.geometries.forEach(indexGeometry); },\n    LineString: function(o) { o.arcs = indexArcs(o.arcs); },\n    MultiLineString: function(o) { o.arcs = o.arcs.map(indexArcs); },\n    Polygon: function(o) { o.arcs = o.arcs.map(indexArcs); },\n    MultiPolygon: function(o) { o.arcs = o.arcs.map(indexMultiArcs); }\n  };\n\n  function indexArcs(arc) {\n    var indexes = [];\n    do {\n      var index = indexByArc.get(arc);\n      indexes.push(arc[0] < arc[1] ? index : ~index);\n    } while (arc = arc.next);\n    return indexes;\n  }\n\n  function indexMultiArcs(arcs) {\n    return arcs.map(indexArcs);\n  }\n\n  for (var key in objects) {\n    indexGeometry(objects[key]);\n  }\n\n  if (transform) {\n    topology.transform = transform;\n    topology.arcs = delta(topology.arcs);\n  }\n\n  return topology;\n}\n\nfunction hashArc(arc) {\n  var i = arc[0], j = arc[1], t;\n  if (j < i) t = i, i = j, j = t;\n  return i + 31 * j;\n}\n\nfunction equalArc(arcA, arcB) {\n  var ia = arcA[0], ja = arcA[1],\n      ib = arcB[0], jb = arcB[1], t;\n  if (ja < ia) t = ia, ia = ja, ja = t;\n  if (jb < ib) t = ib, ib = jb, jb = t;\n  return ia === ib && ja === jb;\n}\n","export {default as topology} from \"./src/topology\";\n","export default function(topology) {\n  var oldObjects = topology.objects,\n      newObjects = {},\n      oldArcs = topology.arcs,\n      oldArcsLength = oldArcs.length,\n      oldIndex = -1,\n      newIndexByOldIndex = new Array(oldArcsLength),\n      newArcsLength = 0,\n      newArcs,\n      newIndex = -1,\n      key;\n\n  function scanGeometry(input) {\n    switch (input.type) {\n      case \"GeometryCollection\": input.geometries.forEach(scanGeometry); break;\n      case \"LineString\": scanArcs(input.arcs); break;\n      case \"MultiLineString\": input.arcs.forEach(scanArcs); break;\n      case \"Polygon\": input.arcs.forEach(scanArcs); break;\n      case \"MultiPolygon\": input.arcs.forEach(scanMultiArcs); break;\n    }\n  }\n\n  function scanArc(index) {\n    if (index < 0) index = ~index;\n    if (!newIndexByOldIndex[index]) newIndexByOldIndex[index] = 1, ++newArcsLength;\n  }\n\n  function scanArcs(arcs) {\n    arcs.forEach(scanArc);\n  }\n\n  function scanMultiArcs(arcs) {\n    arcs.forEach(scanArcs);\n  }\n\n  function reindexGeometry(input) {\n    var output;\n    switch (input.type) {\n      case \"GeometryCollection\": output = {type: \"GeometryCollection\", geometries: input.geometries.map(reindexGeometry)}; break;\n      case \"LineString\": output = {type: \"LineString\", arcs: reindexArcs(input.arcs)}; break;\n      case \"MultiLineString\": output = {type: \"MultiLineString\", arcs: input.arcs.map(reindexArcs)}; break;\n      case \"Polygon\": output = {type: \"Polygon\", arcs: input.arcs.map(reindexArcs)}; break;\n      case \"MultiPolygon\": output = {type: \"MultiPolygon\", arcs: input.arcs.map(reindexMultiArcs)}; break;\n      default: return input;\n    }\n    if (input.id != null) output.id = input.id;\n    if (input.bbox != null) output.bbox = input.bbox;\n    if (input.properties != null) output.properties = input.properties;\n    return output;\n  }\n\n  function reindexArc(oldIndex) {\n    return oldIndex < 0 ? ~newIndexByOldIndex[~oldIndex] : newIndexByOldIndex[oldIndex];\n  }\n\n  function reindexArcs(arcs) {\n    return arcs.map(reindexArc);\n  }\n\n  function reindexMultiArcs(arcs) {\n    return arcs.map(reindexArcs);\n  }\n\n  for (key in oldObjects) {\n    scanGeometry(oldObjects[key]);\n  }\n\n  newArcs = new Array(newArcsLength);\n\n  while (++oldIndex < oldArcsLength) {\n    if (newIndexByOldIndex[oldIndex]) {\n      newIndexByOldIndex[oldIndex] = ++newIndex;\n      newArcs[newIndex] = oldArcs[oldIndex];\n    }\n  }\n\n  for (key in oldObjects) {\n    newObjects[key] = reindexGeometry(oldObjects[key]);\n  }\n\n  return {\n    type: \"Topology\",\n    bbox: topology.bbox,\n    transform: topology.transform,\n    objects: newObjects,\n    arcs: newArcs\n  };\n}\n","import prune from \"./prune\";\n\nexport default function(topology, filter) {\n  var oldObjects = topology.objects,\n      newObjects = {},\n      key;\n\n  if (filter == null) filter = filterTrue;\n\n  function filterGeometry(input) {\n    var output, arcs;\n    switch (input.type) {\n      case \"Polygon\": {\n        arcs = filterRings(input.arcs);\n        output = arcs ? {type: \"Polygon\", arcs: arcs} : {type: null};\n        break;\n      }\n      case \"MultiPolygon\": {\n        arcs = input.arcs.map(filterRings).filter(filterIdentity);\n        output = arcs.length ? {type: \"MultiPolygon\", arcs: arcs} : {type: null};\n        break;\n      }\n      case \"GeometryCollection\": {\n        arcs = input.geometries.map(filterGeometry).filter(filterNotNull);\n        output = arcs.length ? {type: \"GeometryCollection\", geometries: arcs} : {type: null};\n        break;\n      }\n      default: return input;\n    }\n    if (input.id != null) output.id = input.id;\n    if (input.bbox != null) output.bbox = input.bbox;\n    if (input.properties != null) output.properties = input.properties;\n    return output;\n  }\n\n  function filterRings(arcs) {\n    return arcs.length && filterExteriorRing(arcs[0]) // if the exterior is small, ignore any holes\n        ? [arcs[0]].concat(arcs.slice(1).filter(filterInteriorRing))\n        : null;\n  }\n\n  function filterExteriorRing(ring) {\n    return filter(ring, false);\n  }\n\n  function filterInteriorRing(ring) {\n    return filter(ring, true);\n  }\n\n  for (key in oldObjects) {\n    newObjects[key] = filterGeometry(oldObjects[key]);\n  }\n\n  return prune({\n    type: \"Topology\",\n    bbox: topology.bbox,\n    transform: topology.transform,\n    objects: newObjects,\n    arcs: topology.arcs\n  });\n}\n\nfunction filterTrue() {\n  return true;\n}\n\nfunction filterIdentity(x) {\n  return x;\n}\n\nfunction filterNotNull(geometry) {\n  return geometry.type != null;\n}\n","export default function(topology) {\n  var ownerByArc = new Array(topology.arcs.length), // arc index -> index of unique associated ring, or -1 if used by multiple rings\n      ownerIndex = 0,\n      key;\n\n  function testGeometry(o) {\n    switch (o.type) {\n      case \"GeometryCollection\": o.geometries.forEach(testGeometry); break;\n      case \"Polygon\": testArcs(o.arcs); break;\n      case \"MultiPolygon\": o.arcs.forEach(testArcs); break;\n    }\n  }\n\n  function testArcs(arcs) {\n    for (var i = 0, n = arcs.length; i < n; ++i, ++ownerIndex) {\n      for (var ring = arcs[i], j = 0, m = ring.length; j < m; ++j) {\n        var arc = ring[j];\n        if (arc < 0) arc = ~arc;\n        var owner = ownerByArc[arc];\n        if (owner == null) ownerByArc[arc] = ownerIndex;\n        else if (owner !== ownerIndex) ownerByArc[arc] = -1;\n      }\n    }\n  }\n\n  for (key in topology.objects) {\n    testGeometry(topology.objects[key]);\n  }\n\n  return function(ring) {\n    for (var j = 0, m = ring.length, arc; j < m; ++j) {\n      if (ownerByArc[(arc = ring[j]) < 0 ? ~arc : arc] === -1) {\n        return true;\n      }\n    }\n    return false;\n  };\n}\n","export function planarTriangleArea(triangle) {\n  var a = triangle[0], b = triangle[1], c = triangle[2];\n  return Math.abs((a[0] - c[0]) * (b[1] - a[1]) - (a[0] - b[0]) * (c[1] - a[1])) / 2;\n}\n\nexport function planarRingArea(ring) {\n  var i = -1, n = ring.length, a, b = ring[n - 1], area = 0;\n  while (++i < n) a = b, b = ring[i], area += a[0] * b[1] - a[1] * b[0];\n  return Math.abs(area) / 2;\n}\n","import {feature} from \"topojson-client\";\nimport {planarRingArea} from \"./planar\";\n\nexport default function(topology, minWeight, weight) {\n  minWeight = minWeight == null ? Number.MIN_VALUE : +minWeight;\n\n  if (weight == null) weight = planarRingArea;\n\n  return function(ring, interior) {\n    return weight(feature(topology, {type: \"Polygon\", arcs: [ring]}).geometry.coordinates[0], interior) >= minWeight;\n  };\n}\n","import filterAttached from \"./filterAttached\";\nimport filterWeight from \"./filterWeight\";\n\nexport default function(topology, minWeight, weight) {\n  var a = filterAttached(topology),\n      w = filterWeight(topology, minWeight, weight);\n  return function(ring, interior) {\n    return a(ring, interior) || w(ring, interior);\n  };\n}\n","function compare(a, b) {\n  return a[1][2] - b[1][2];\n}\n\nexport default function() {\n  var heap = {},\n      array = [],\n      size = 0;\n\n  heap.push = function(object) {\n    up(array[object._ = size] = object, size++);\n    return size;\n  };\n\n  heap.pop = function() {\n    if (size <= 0) return;\n    var removed = array[0], object;\n    if (--size > 0) object = array[size], down(array[object._ = 0] = object, 0);\n    return removed;\n  };\n\n  heap.remove = function(removed) {\n    var i = removed._, object;\n    if (array[i] !== removed) return; // invalid request\n    if (i !== --size) object = array[size], (compare(object, removed) < 0 ? up : down)(array[object._ = i] = object, i);\n    return i;\n  };\n\n  function up(object, i) {\n    while (i > 0) {\n      var j = ((i + 1) >> 1) - 1,\n          parent = array[j];\n      if (compare(object, parent) >= 0) break;\n      array[parent._ = i] = parent;\n      array[object._ = i = j] = object;\n    }\n  }\n\n  function down(object, i) {\n    while (true) {\n      var r = (i + 1) << 1,\n          l = r - 1,\n          j = i,\n          child = array[j];\n      if (l < size && compare(array[l], child) < 0) child = array[j = l];\n      if (r < size && compare(array[r], child) < 0) child = array[j = r];\n      if (j === i) break;\n      array[child._ = i] = child;\n      array[object._ = i = j] = object;\n    }\n  }\n\n  return heap;\n}\n","import {transform} from \"topojson-client\";\nimport newHeap from \"./heap\";\nimport {planarTriangleArea} from \"./planar\";\n\nfunction copy(point) {\n  return [point[0], point[1], 0];\n}\n\nexport default function(topology, weight) {\n  var point = topology.transform ? transform(topology.transform) : copy,\n      heap = newHeap();\n\n  if (weight == null) weight = planarTriangleArea;\n\n  var arcs = topology.arcs.map(function(arc) {\n    var triangles = [],\n        maxWeight = 0,\n        triangle,\n        i,\n        n;\n\n    arc = arc.map(point);\n\n    for (i = 1, n = arc.length - 1; i < n; ++i) {\n      triangle = [arc[i - 1], arc[i], arc[i + 1]];\n      triangle[1][2] = weight(triangle);\n      triangles.push(triangle);\n      heap.push(triangle);\n    }\n\n    // Always keep the arc endpoints!\n    arc[0][2] = arc[n][2] = Infinity;\n\n    for (i = 0, n = triangles.length; i < n; ++i) {\n      triangle = triangles[i];\n      triangle.previous = triangles[i - 1];\n      triangle.next = triangles[i + 1];\n    }\n\n    while (triangle = heap.pop()) {\n      var previous = triangle.previous,\n          next = triangle.next;\n\n      // If the weight of the current point is less than that of the previous\n      // point to be eliminated, use the latters weight instead. This ensures\n      // that the current point cannot be eliminated without eliminating\n      // previously- eliminated points.\n      if (triangle[1][2] < maxWeight) triangle[1][2] = maxWeight;\n      else maxWeight = triangle[1][2];\n\n      if (previous) {\n        previous.next = next;\n        previous[2] = triangle[2];\n        update(previous);\n      }\n\n      if (next) {\n        next.previous = previous;\n        next[0] = triangle[0];\n        update(next);\n      }\n    }\n\n    return arc;\n  });\n\n  function update(triangle) {\n    heap.remove(triangle);\n    triangle[1][2] = weight(triangle);\n    heap.push(triangle);\n  }\n\n  return {\n    type: \"Topology\",\n    bbox: topology.bbox,\n    objects: topology.objects,\n    arcs: arcs\n  };\n}\n","export default function(topology, p) {\n  var array = [];\n\n  topology.arcs.forEach(function(arc) {\n    arc.forEach(function(point) {\n      if (isFinite(point[2])) { // Ignore endpoints, whose weight is Infinity.\n        array.push(point[2]);\n      }\n    });\n  });\n\n  return array.length && quantile(array.sort(descending), p);\n}\n\nfunction quantile(array, p) {\n  if (!(n = array.length)) return;\n  if ((p = +p) <= 0 || n < 2) return array[0];\n  if (p >= 1) return array[n - 1];\n  var n,\n      h = (n - 1) * p,\n      i = Math.floor(h),\n      a = array[i],\n      b = array[i + 1];\n  return a + (b - a) * (h - i);\n}\n\nfunction descending(a, b) {\n  return b - a;\n}\n","export default function(topology, minWeight) {\n  minWeight = minWeight == null ? Number.MIN_VALUE : +minWeight;\n\n  // Remove points whose weight is less than the minimum weight.\n  var arcs = topology.arcs.map(function(input) {\n    var i = -1,\n        j = 0,\n        n = input.length,\n        output = new Array(n), // pessimistic\n        point;\n\n    while (++i < n) {\n      if ((point = input[i])[2] >= minWeight) {\n        output[j++] = [point[0], point[1]];\n      }\n    }\n\n    output.length = j;\n    return output;\n  });\n\n  return {\n    type: \"Topology\",\n    transform: topology.transform,\n    bbox: topology.bbox,\n    objects: topology.objects,\n    arcs: arcs\n  };\n}\n","var pi = Math.PI,\n    tau = 2 * pi,\n    quarterPi = pi / 4,\n    radians = pi / 180,\n    abs = Math.abs,\n    atan2 = Math.atan2,\n    cos = Math.cos,\n    sin = Math.sin;\n\nfunction halfArea(ring, closed) {\n  var i = 0,\n      n = ring.length,\n      sum = 0,\n      point = ring[closed ? i++ : n - 1],\n      lambda0, lambda1 = point[0] * radians,\n      phi1 = (point[1] * radians) / 2 + quarterPi,\n      cosPhi0, cosPhi1 = cos(phi1),\n      sinPhi0, sinPhi1 = sin(phi1);\n\n  for (; i < n; ++i) {\n    point = ring[i];\n    lambda0 = lambda1, lambda1 = point[0] * radians;\n    phi1 = (point[1] * radians) / 2 + quarterPi;\n    cosPhi0 = cosPhi1, cosPhi1 = cos(phi1);\n    sinPhi0 = sinPhi1, sinPhi1 = sin(phi1);\n\n    // Spherical excess E for a spherical triangle with vertices: south pole,\n    // previous point, current point.  Uses a formula derived from Cagnolis\n    // theorem.  See Todhunter, Spherical Trig. (1871), Sec. 103, Eq. (2).\n    // See https://github.com/d3/d3-geo/blob/master/README.md#geoArea\n    var dLambda = lambda1 - lambda0,\n        sdLambda = dLambda >= 0 ? 1 : -1,\n        adLambda = sdLambda * dLambda,\n        k = sinPhi0 * sinPhi1,\n        u = cosPhi0 * cosPhi1 + k * cos(adLambda),\n        v = k * sdLambda * sin(adLambda);\n    sum += atan2(v, u);\n  }\n\n  return sum;\n}\n\nexport function sphericalRingArea(ring, interior) {\n  var sum = halfArea(ring, true);\n  if (interior) sum *= -1;\n  return (sum < 0 ? tau + sum : sum) * 2;\n}\n\nexport function sphericalTriangleArea(t) {\n  return abs(halfArea(t, false)) * 2;\n}\n","export {default as filter} from \"./src/filter\";\nexport {default as filterAttached} from \"./src/filterAttached\";\nexport {default as filterAttachedWeight} from \"./src/filterAttachedWeight\";\nexport {default as filterWeight} from \"./src/filterWeight\";\nexport {planarRingArea, planarTriangleArea} from \"./src/planar\";\nexport {default as presimplify} from \"./src/presimplify\";\nexport {default as quantile} from \"./src/quantile\";\nexport {default as simplify} from \"./src/simplify\";\nexport {sphericalRingArea, sphericalTriangleArea} from \"./src/spherical\";\n","export * from \"topojson-client\";\nexport * from \"topojson-server\";\nexport * from \"topojson-simplify\";\n","import load from './load-data'\nimport * as topojson from 'topojson';\n\n// data\nlet centers = null\nlet movement = null\nlet us = null\n\n// selections\nconst $section = d3.selectAll('.movement')\nconst $figure = $section.selectAll('.movement-figure')\nconst $svg = $figure.selectAll('.figure-container_svg')\n\n// dimensions\nlet width = 0;\nlet height = 0;\nconst marginTop = 20;\nconst marginBottom = 20;\nconst marginLeft = 20;\nconst marginRight = 20;\nconst hypotenuse = Math.sqrt(width * width + height * height);\n\n// map constants\nlet projection = d3.geoAlbersUsa()\nlet radius = d3.scaleSqrt()\nlet path = d3.geoPath()\n\nfunction setupDOM(){\n  const $basemap = $svg.append('g')\n    .attr('class', 'basemap')\n\n  $basemap.append(\"path\")\n      .datum(topojson.feature(us, us.objects.land))\n      .attr(\"class\", \"land\")\n      .attr(\"d\", path);\n\n  $basemap.append(\"path\")\n      .datum(topojson.mesh(us, us.objects.states, function(a, b) { return a !== b; }))\n      .attr(\"class\", \"state-borders\")\n      .attr(\"d\", path);\n\n    console.log({us})\n\n  const $drawnPaths = $svg.append('g')\n    .attr('class', 'paths')\n\n  $drawnPaths.append(\"path\")\n      .datum({type: \"MultiPoint\", coordinates: centers})\n      .attr(\"class\", \"state-dots\")\n      .attr(\"d\", path);\n\n  let state = $drawnPaths.selectAll(\".state-center\")\n   .data(centers)\n   .enter()\n   .append(\"g\")\n   .attr(\"class\", \"state-center\");\n\n   state.append(\"path\")\n       .attr(\"class\", \"movement-arc\")\n       .attr(\"d\", function(d) { return path(d.arcs); });\n}\n\nfunction setup(){\n  findCoordinates()\n  resize()\n  setupDOM()\n\n}\n\n\nfunction resize(){\n  width = $figure.node().offsetWidth - marginLeft - marginRight;\n  height = $figure.node().offsetHeight - marginTop - marginBottom;\n\n  $svg\n    .attr('width', width + marginLeft + marginRight)\n    .attr('height', height + marginTop + marginBottom);\n\n  projection\n    .translate([width / 2, height / 2])\n    .scale(1000);\n\n  console.log({projection})\n\n  radius\n      .domain([0, 100])\n      .range([0, 14]);\n\n  path\n      .projection(projection)\n      .pointRadius(2.5);\n\n}\n\nfunction setupLocations(d) {\n  d[0] = +d.longitude;\n  d[1] = +d.latitude;\n  d.arcs = {type: \"MultiLineString\", coordinates: []};\n  return d;\n}\n\nfunction findCoordinates(){\n\n  let locationByName = d3.map( centers, d => d.location );\n\n  const test = locationByName.get('Alabama')\n\n  movement.forEach((dog) => {\n    let source = locationByName.get(dog.from)\n    let target = locationByName.get(dog.to)\n    source.arcs.coordinates.push([source, target]);\n    target.arcs.coordinates.push([target, source]);\n  });\n\n  centers = centers\n       .filter(function(d) { return d.arcs.coordinates.length; });\n}\n\nfunction init(){\n  load.loadMap()\n    .then(result => {\n      centers = result[0].map(d => setupLocations(d))\n      movement = result[1]\n      us = result[2]\n      setup()\n  })\n  .catch(console.error)\n\n}\n\nexport default { init, resize }\n","/* global d3 */\nimport debounce from 'lodash.debounce';\nimport isMobile from './utils/is-mobile';\nimport graphic from './graphic';\nimport exported from './exported-dogs';\nimport footer from './footer';\nimport states from './utils/us-state-data'\nimport movement from './movement'\n\nconst $body = d3.select('body');\nlet previousWidth = 0;\nconst $dropdown = d3.selectAll('.stateSelect')\nlet readerState = 'Washington'\n\nfunction resize() {\n  // only do resize on width changes, not height\n  // (remove the conditional if you want to trigger on height change)\n  const width = $body.node().offsetWidth;\n  if (previousWidth !== width) {\n    previousWidth = width;\n    graphic.resize();\n  }\n}\n\nfunction setupStateDropdown(){\n  const justStates = states.map(d => d.state)\n\n  $dropdown.selectAll('option')\n    .data(justStates)\n    .enter()\n    .append('option')\n    .attr('value', d => d)\n    .text(d => d)\n    .property('selected', d => d === readerState)\n\n  $dropdown.on('change', function(d){\n    readerState = this.value\n    updateLocation()\n  })\n}\n\nfunction updateLocation(){\n  graphic.updateLocation(readerState)\n  exported.updateLocation(readerState)\n}\n\nfunction setupStickyHeader() {\n  const $header = $body.select('header');\n  if ($header.classed('is-sticky')) {\n    const $menu = $body.select('.header__menu');\n    const $toggle = $body.select('.header__toggle');\n    $toggle.on('click', () => {\n      const visible = $menu.classed('is-visible');\n      $menu.classed('is-visible', !visible);\n      $toggle.classed('is-visible', !visible);\n    });\n  }\n}\n\nfunction init() {\n  // add mobile class to body tag\n  $body.classed('is-mobile', isMobile.any());\n  // setup resize event\n  window.addEventListener('resize', debounce(resize, 150));\n  // setup sticky header menu\n  setupStickyHeader();\n  // kick off graphic code\n  setupStateDropdown()\n  graphic.init(readerState);\n  exported.init(readerState);\n  movement.init();\n\n  // load footer stories\n  footer.init();\n}\n\ninit();\n"]}